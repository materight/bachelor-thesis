\chapter{Introduction}
\label{cha:introduction}

This chapter consists of three sections. In the first one, the research problem behind this thesis as well as various initial hypotheses are presented. The next section gives an overview of the RetailerIN system, that collected and provided all the data used in this research. The last one describes the general structure of the thesis.

\section{Research problem and initial hypotheses}
\label{sec:research_problem_and_initial_hypoteses}

This thesis was written as part of an internship at Thinkinside\footnote{www.thinkin.io}, a company located in Trento specialized in location intelligence for indoor spaces. Thinkinside flagship product, RetailerIN\footnote{www.retailerin.com}, is designed to help stores obtain knowledge of the customers’ behavior inside their shop. Typically those stores only have information about the purchases made, but have no visibility on what the customers actually do while shopping: how they move and respond to promotions, how different displays configuration impact sales, where are the bottlenecks in the shopping flow, what are the under-visited areas… By tracking the position of the stores’ physical assets, i.e. carts and baskets, with high-precision localization sensors and by analyzing the shoppers’ movements, RetailerIN is able to derive all these valuable information and present them in a visual dashboard for the store managers.

From these analyses, the system developed by Thinkinside is also able to suggest adjusting staffing levels based on customers volume, for example by repositioning sales associates across departments or by prioritizing the activities to perform in the store in order to maximize store operations while preserving an adequate customer support. In this context, a great impact on the customers’ shopping experience is given by waiting queues. Long queues and waiting times have significant influence over the perceived service quality and therefore over the customers’ loyalty and conversion rate. Hence, avoiding, or at least reducing, the waiting queues should eventually lead to an increase on sales. In the context of supermarkets, the only way to achieve this kind of optimization is by opening and closing checkouts according to the customers flow. Typically, this is done directly by the staff, by observing the current queue length and deciding on whether a terminal shall be opened or closed. While this approach can be quite effective if the adjustments are responsive enough to sudden changes in the flow of people arriving at the checkouts, it necessarily introduces a certain delay given by the checkouts’ opening time and by some of the customers leaving a queue and joining the new one. Moreover, it does not take in account the possible traffic spikes. For example, a new checkout get opened to reduce the current queue length, but it is left unused after a short time due to the incoming traffic returning to a normal level. These issues could be prevented by defining a predictive model for the arrival rate at the checkouts, that would allow to prevent opening additional counters if the increases in traffic levels are not persistent. The previous scenario also introduces a second factor that must be considered to achieve the aforementioned optimization: the cost in terms of manned staff at the checkouts. Naturally, the minimum possible queue length can be achieved by maximizing the service capacity, that is leaving all the available terminals opened. This however would lead to overstaffing in most of the cases, since a lower number of checkouts would be able to satisfy every new arriving customer. Moreover, the overstaffing would decrease the overall store performance and increase the total time spent in idle by the staff, since it would keep them at the counters without any actual customer to serve, preventing them from focusing on the right activities at the right time. The number of open counters should therefore be minimized in order to maximize store operations while preserving an adequate customer support.

Both presented requirements, maximizing customers satisfaction by preventing queues and maximizing store operations by reducing the number of available terminals, conflict with each other, meaning that an optimal compromise must be designed. The purpose of this research is to find such compromise that should allows to control and reduce the working time beyond the checkouts without creating long waiting queues. The problem could be approached in three different ways:
\begin{itemize}
  \item Minimizing the number of open counters, such that a predetermined maximum threshold for the queue length (or waiting time) is not exceeded.
  \item Minimizing the queue length, such that a predetermined maximum threshold for the number of open counters, and therefore for the staffing level, is not exceeded.
  \item Defining a “cost function” that quantizes both factors by assigning them a value in terms of costs. By taking in account the inflow traffic, the optimal values for the two factors can be determined such that the cost function is minimized.
\end{itemize}

While the last approach could give the best results, it is difficult to assign a value, in terms of costs, to the length of a queue or to the number of open terminals, since it may depend on other external factors and specific store policies. Considering that it is easier to manipulate the number of open counters, the first approach was therefore chosen and researched. This approach is based on two main assumptions:
\begin{itemize}
  \item Optimizing the number of open checkouts in a supermarket decreases the total staff’s idle time during the shifts at the counters.
  \item It is possible to optimize the number of open checkouts without any loss on customer satisfaction, represented by the waiting queue length.
\end{itemize}

As explained before, a predictive model for the expected queue length is necessary for this optimization to be effective. This requirement introduces another hypothesis that must hold:
\begin{itemize}
  \item It is possible to forecast the waiting queue length by analyzing the customers’ shopping behavior in the previous periods.
\end{itemize}

The next chapters explore and validate these hypotheses by the analysis of real-world data from two different supermarkets.

\section{The RetailerIN system}
\label{sec:retailerin_system}

All the data used in this research is provided by the RetailerIN system. RetailerIN is an in-store analytics and engagement solution written in Scala, able to measure and analyze in real-time and with high precision (sub-meter accuracy) how shoppers move and interact with products in a physical store. RetailerIN relies on an indoor location system based on BLE tags attached to baskets and carts and on receiver antennas mounted on the ceilings. Since only these assets are tracked, all the data collected is anonymous, not traceable to specific customers. For every asset, the RetailerIN system is able to build the path of the movements and to segment it into each different customer’s shopping session, constructing a detailed “shopping journey” report. This data is then stored and processed in real-time to extract relevant indicators and metrics on the customers’ behavior. These indicators are used to build visual analytics dashboards for store and marketing managers, helping them to optimize the placement of goods, to measure the effectiveness of store layouts and to improve staff management.

\section{Structure of the thesis}
\label{sec:structure_of_the_thesis}

Chapter~\ref{cha:state_of_the_art} explores the available literature and introduces different possible approaches to the problem. Chapter~\ref{cha:data_analysis} describes all the analysis conducted in order to obtain a better understanding of the data as well as identify the most appropriate solutions to achieve the research goals. In Chapter~\ref{cha:solution} the final prediction model is introduced and justified. Chapter~\ref{cha:results} discusses the models prediction accuracy and the choices made for the final implementation. The final chapter provides a conclusion derived from the results and points out some limitations and possible future improvements of the system.

\clearpage